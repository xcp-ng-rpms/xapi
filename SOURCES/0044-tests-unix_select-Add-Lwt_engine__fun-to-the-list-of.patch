From 529dfde928058590be634cd7defd465802e6f87f Mon Sep 17 00:00:00 2001
From: Andrii Sultanov <andriy.sultanov@vates.tech>
Date: Wed, 7 May 2025 13:26:15 +0100
Subject: [PATCH] tests/unix_select: Add Lwt_engine__fun to the list of
 expected functions calling select

Signed-off-by: Andrii Sultanov <andriy.sultanov@vates.tech>
---
 ocaml/tests/unix_select.gawk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/ocaml/tests/unix_select.gawk b/ocaml/tests/unix_select.gawk
index 2decd4044..1496eba53 100644
--- a/ocaml/tests/unix_select.gawk
+++ b/ocaml/tests/unix_select.gawk
@@ -35,7 +35,7 @@ END {
     for (idx in CALLS[SYM]) {
       caller = CALLS[SYM][idx];
       print "--"
-      if (caller ~ /caml(Thread|Unix__fun_).*/) {
+      if (caller ~ /caml(Thread|Unix__fun_|Lwt_engine__fun_).*/) {
         # direct calls from these functions to unix_select are expected
         print caller "[expected]"
       } else {
